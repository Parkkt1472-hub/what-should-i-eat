# 🧪 이색맛집 알고리즘 테스트 케이스

## 📅 작성일: 2026-02-20

---

## 🎯 테스트 목적

희귀도 기반 알고리즘이 정상적으로 작동하는지 검증

---

## ✅ 테스트 시나리오

### 1️⃣ **흔한 음식 테스트 (낮은 점수 기대)**

#### **김치찌개**
```
예상 결과:
- 희귀도: 10점
- 최종 점수: 3~15점
- TOP5 순위: 하위권 또는 제외

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=김치찌개

확인 사항:
✅ adventureScore가 15점 이하인가?
✅ adventureLevel이 50% 이하인가?
✅ menuRarity가 10점인가?
```

#### **치킨**
```
예상 결과:
- 희귀도: 10점
- 최종 점수: 5~10점
- TOP5 순위: 최하위 또는 제외

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=치킨

확인 사항:
✅ adventureScore가 10점 이하인가?
✅ 체인점(교촌, BBQ 등)이 제외되었는가?
```

#### **짜장면**
```
예상 결과:
- 희귀도: 10점
- 최종 점수: 10~15점
- TOP5 순위: 하위권

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=짜장면

확인 사항:
✅ 전문점이 아닌 일반 중국집은 낮은 점수인가?
```

---

### 2️⃣ **희귀한 음식 테스트 (높은 점수 기대)**

#### **추어탕**
```
예상 결과:
- 희귀도: 80점
- 최종 점수: 60~75점
- TOP5 순위: 상위권 (1~3위)

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=추어탕

확인 사항:
✅ adventureScore가 60점 이상인가?
✅ adventureLevel이 100% (만점)인가?
✅ menuRarity가 80점인가?
✅ "전문점" 키워드가 우선되는가?
```

#### **곱창**
```
예상 결과:
- 희귀도: 80점
- 최종 점수: 60~75점
- TOP5 순위: 상위권

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=곱창

확인 사항:
✅ 전문점이 상위에 있는가?
✅ 일반 고깃집은 낮은 순위인가?
```

#### **타코**
```
예상 결과:
- 희귀도: 80점
- 최종 점수: 70~87점
- TOP5 순위: 최상위 (1~2위)

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=타코

확인 사항:
✅ 멕시칸 카테고리 보너스 (+15점)가 적용되는가?
✅ 전문점이 최우선인가?
```

---

### 3️⃣ **매우 희귀한 음식 테스트 (초고점 기대)**

#### **양고기**
```
예상 결과:
- 희귀도: 95점
- 최종 점수: 75~90점
- TOP5 순위: 1위

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=양고기

확인 사항:
✅ adventureScore가 75점 이상인가?
✅ adventureLevel이 100% (만점)인가?
✅ menuRarity가 95점인가?
✅ 모든 결과가 고득점인가?
```

#### **에티오피아 요리**
```
예상 결과:
- 희귀도: 95점
- 최종 점수: 80~95점
- TOP5 순위: 1위

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=에티오피아

확인 사항:
✅ 최고 희귀도 점수인가?
✅ 검색 결과가 있는가? (없을 수도 있음)
```

---

### 4️⃣ **보통 희귀도 음식 테스트 (중간 점수 기대)**

#### **파스타**
```
예상 결과:
- 희귀도: 50점
- 최종 점수: 35~45점
- TOP5 순위: 중위권

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=파스타

확인 사항:
✅ 이탈리안 카테고리 보너스가 있는가?
✅ 중간 정도의 점수인가?
```

#### **초밥**
```
예상 결과:
- 희귀도: 50점
- 최종 점수: 35~45점
- TOP5 순위: 중위권

테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=초밥

확인 사항:
✅ 일식 카테고리 보너스가 있는가?
✅ 전문점과 일반 초밥집의 점수 차이가 있는가?
```

---

### 5️⃣ **지역별 테스트**

#### **서울 강남 타코**
```
테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=타코&region=서울%20강남

확인 사항:
✅ 강남 지역 타코 전문점이 나오는가?
✅ 높은 점수인가?
```

#### **홍대 케밥**
```
테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=케밥&region=홍대

확인 사항:
✅ 홍대 지역 케밥집이 나오는가?
✅ 희귀도 보너스가 적용되는가?
```

---

## 📊 점수 범위 검증

### **예상 점수 분포**
| 메뉴 카테고리 | 희귀도 | 최소 점수 | 최대 점수 | 순위 |
|--------------|--------|-----------|-----------|------|
| 매우 희귀 (양고기) | 95 | 75 | 95 | 1위 |
| 희귀 (타코 전문점) | 80 | 70 | 87 | 1~2위 |
| 희귀 (추어탕 전문점) | 80 | 60 | 75 | 2~3위 |
| 보통 (파스타) | 50 | 35 | 45 | 중위권 |
| 흔함 (김치찌개) | 10 | 3 | 15 | 하위권 |
| 매우 흔함 (치킨) | 10 | 0 | 10 | 최하위 |

---

## 🚫 제외 확인 테스트

### **체인점 제외 테스트**
```
테스트 URL:
https://what-should-i-eat-red.vercel.app/api/adventure?menu=치킨

확인 사항:
❌ 교촌치킨이 나오지 않는가?
❌ BBQ가 나오지 않는가?
❌ 굽네치킨이 나오지 않는가?
✅ 개인 운영 치킨집만 나오는가?
```

### **광고성 키워드 감점 테스트**
```
확인 사항:
✅ "체험단", "협찬" 키워드가 있으면 점수가 낮은가?
✅ 광고성 가게가 하위 순위인가?
```

---

## 🎯 성공 기준

### ✅ **Pass 조건**
1. 희귀한 음식(추어탕, 타코)이 **60점 이상**
2. 흔한 음식(김치찌개, 치킨)이 **15점 이하**
3. 체인점이 **완전 제외** (-100점)
4. 전문점이 **일반 가게보다 높은 점수**
5. menuRarity 값이 **올바르게 반환**

### ❌ **Fail 조건**
1. 김치찌개가 추어탕보다 높은 점수
2. 체인점이 TOP5에 포함됨
3. 희귀도 점수가 반영되지 않음
4. 전문점이 낮은 점수

---

## 📝 테스트 결과 기록 템플릿

### **테스트 케이스: 추어탕**
```
테스트 일시: 2026-02-20 10:45
테스트 URL: https://what-should-i-eat-red.vercel.app/api/adventure?menu=추어탕

결과:
{
  "items": [
    {
      "rank": 1,
      "title": "정통 추어탕 전문점",
      "adventureScore": 72,
      "adventureLevel": 100,
      "menuRarity": 80
    }
  ]
}

판정:
✅ PASS - 희귀도 80점, 최종 점수 72점으로 예상 범위 내
✅ PASS - adventureLevel 100% (만점)
✅ PASS - menuRarity 올바르게 반환
```

---

## 🔄 회귀 테스트 (Regression Test)

기존 기능이 정상 작동하는지 확인:

1. ✅ **캐싱 기능**
   - 동일한 검색을 30분 내 반복하면 캐시된 결과 반환
   - 로그에 "[adventure API] Cache hit" 출력

2. ✅ **지역 필터**
   - region 파라미터가 정상 작동
   - 특정 지역 검색 시 해당 지역 결과만 반환

3. ✅ **중복 제거**
   - 같은 가게명+주소는 하나만 표시
   - 점수가 더 높은 것으로 유지

4. ✅ **TOP5 제한**
   - 항상 최대 5개 결과만 반환
   - 점수 순으로 정렬

---

## 🐛 알려진 이슈 및 제한사항

1. **지역별 희귀도 차등 적용 안됨**
   - 현재: 모든 지역에서 동일한 희귀도
   - 예: 부산에서 돼지국밥은 흔하지만, 서울과 동일하게 처리됨

2. **실시간 인기도 반영 안됨**
   - Naver API의 리뷰 수, 평점 등은 점수에 미반영
   - 향후 개선 필요

3. **개인화 추천 없음**
   - 모든 사용자에게 동일한 결과
   - 개인 취향/이력 미반영

---

## 📚 참고 문서

- [알고리즘 변경사항](./RARITY_ALGORITHM_CHANGES.md)
- [배포 완료 보고서](./DEPLOYMENT_SUCCESS.md)
- [API 코드](./app/api/adventure/route.ts)

---

**작성일**: 2026-02-20  
**작성자**: Claude AI  
**버전**: 1.0
